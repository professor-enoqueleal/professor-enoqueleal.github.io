<!doctype html>











































<html
  class="not-ready lg:text-base"
  style="--bg: #faf8f1"
  lang="pt"
  dir="ltr"
>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>LAB 4 - Criando o método para DELETE - Car Store</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Visão geral e objetivos do laboratório
Este laboratório tem como objetivo apresentar uma forma básica sobre como deletar dados em uma tabela no banco de dados!
Após concluir este laboratório, você deverá ser capaz de:

Fazer requisições http através de um formulário HTML e capturar os dados dessa requisição em uma Servlet;
Deletar / remover dados que foram persistidos no banco de dados (delete car where id = ?).

Esse laboratório também esta disponível em formato de vídeo aula no YouTube

      
    

Tarefa 1: Criando o método deleteCarById()
Agora que você já tem sua aplicação devidamente criada, já conseguiu subir seu servidor web e já consegue gravar e consultar os dados no banco de dados, chegou a hora de implementar a operação que consiste em deletar / remover dados que foram persistidos no banco de dados da sua aplicação." />
  <meta name="author" content="Enoque Leal" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="//localhost:1313/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="//localhost:1313/theme.png" />

  
  
  
  
  <link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/127161266?v=4" />
  
  

  
  
  <link rel="preload" as="image" href="//localhost:1313/twitter.svg" />
  
  <link rel="preload" as="image" href="//localhost:1313/github.svg" />
  
  <link rel="preload" as="image" href="//localhost:1313/instagram.svg" />
  
  

  
  
  <script
    defer
    src="//localhost:1313/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="//localhost:1313/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="//localhost:1313/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.144.2">

  
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="//localhost:1313/"
      >Car Store</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="http://youtube.com/@enoque-dev"
        >YouTube</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/enoquefsleal"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/professor-enoqueleal"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./instagram.svg)"
        href="https://instagram.com/enoque.dev"
        target="_blank"
        rel="me"
      >
        instagram
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100vh-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">LAB 4 - Criando o método para DELETE</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>11 de out. de 2024</time>
      
      
      
      
      <span class="mx-1">&middot;</span>
      <span>Enoque Leal</span>
      
    </div>
    
  </header>

  <section><h2 id="visão-geral-e-objetivos-do-laboratório">Visão geral e objetivos do laboratório</h2>
<p>Este laboratório tem como objetivo apresentar uma forma básica sobre como deletar dados em uma tabela no banco de dados!</p>
<p>Após concluir este laboratório, você deverá ser capaz de:</p>
<ul>
<li>Fazer requisições http através de um formulário HTML e capturar os dados dessa requisição em uma Servlet;</li>
<li>Deletar / remover dados que foram persistidos no banco de dados (delete car where id = ?).</li>
</ul>
<h2 id="esse-laboratório-também-esta-disponível-em-formato-de-vídeo-aula-no-youtube">Esse laboratório também esta disponível em formato de vídeo aula no YouTube</h2>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/b3LSVup5AMc?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>

<h2 id="tarefa-1-criando-o-método-deletecarbyid">Tarefa 1: Criando o método deleteCarById()</h2>
<p>Agora que você já tem sua aplicação devidamente criada, já conseguiu subir seu servidor web e já consegue gravar e consultar os dados no banco de dados, chegou a hora de implementar a operação que consiste em deletar / remover dados que foram persistidos no banco de dados da sua aplicação.</p>
<p>1 - Para isso, vamos criar um novo método chamado <strong>deleteCarById()</strong>. Esse método deverá ser criado dentro da classe <strong>CarDao</strong>.</p>
<p>OBS: A classe <strong>CarDao</strong> já existe e possui dois métodos, sendo eles <strong>createCar()</strong> e <strong>findAllCars</strong>. Nesta seção nós vamos apenas criar /adicionar um novo método dentro dessa classe. O nome do método deve ser <strong>deleteCarById()</strong>. Este méotodo receberá uma String como parâmetro e o seu retorno será do tipo <em>void</em>.</p>
<p>Para isso, abra a classe <strong>CarDao</strong> e implemente o método <strong>deleteCarById()</strong>. O código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deleteCarById</span>(String carId) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>2 - Agora vamos implementar a lógica que faz a remocão / delete do dado no banco de dados. O primeiro passo é criar uma variável do tipo string que chamaremos de SQL. Essa variável recebe como valor uma string contento o comando SQL para fazer o delete (DELETE CAR WHERE ID = ?).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deleteCarById</span>(String carId) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String SQL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DELETE CAR WHERE ID = ?&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>OBS: Esse comando fará a remoção do dado armazenado na nossa tabela de acordo com o ID informado.</p>
<p>3 - O restante da implementação do método será bem similar a implementação que fizemos anteriormente no método <strong>createCar()</strong>. Teremos o bloco <em>try / catch</em> e também as mensagens de feedback para que possamos saber se a operação foi bem sucedida ou não.</p>
<p>O código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deleteCarById</span>(String carId) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String SQL <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DELETE CAR WHERE ID = ?&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Connection connection <span style="color:#f92672">=</span> DriverManager.<span style="color:#a6e22e">getConnection</span>(<span style="color:#e6db74">&#34;jdbc:h2:~/test&#34;</span>, <span style="color:#e6db74">&#34;sa&#34;</span>, <span style="color:#e6db74">&#34;sa&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;success in database connection&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        PreparedStatement preparedStatement <span style="color:#f92672">=</span> connection.<span style="color:#a6e22e">prepareStatement</span>(SQL);
</span></span><span style="display:flex;"><span>        preparedStatement.<span style="color:#a6e22e">setString</span>(1, carId);
</span></span><span style="display:flex;"><span>        preparedStatement.<span style="color:#a6e22e">execute</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;success on delete car with id: &#34;</span> <span style="color:#f92672">+</span> carId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        connection.<span style="color:#a6e22e">close</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;fail in database connection&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>OBS: Não se preocupe com repetição de código nesse momento. Nos próximos laboratórios nós faremos uma refatoração para remover código repetido <em>(Boilerplate)</em>.</p>
<p>4 - Agora que já implementamos o método <strong>deleteCarById()</strong> que recebe um ID por parâmetro e executa a lógica para a remoção do registro de um carro em nossa tabela, já podemos seguir com a criação da <em>Servlet</em> que ficará responsável por receber as requisições de <em>delete</em>.</p>
<p>No pacote br.com.carstore.servlet, selecione a opção <em>New</em> e depois a opção <em>Java Class</em>. No assistente de criação, digite o nome da classe: <strong>DeleteCarServlet</strong>.</p>
<p>A estrutura dessa servlet será semelhante a estrutura da servlet <strong>CreateCarServlet</strong>, porém o endpoint cadastrado na anotação <strong>@WebServlet</strong> deve ser <strong>/delete-car</strong> e o método a ser sobrescrito (Override) deve ser o método <strong>doPost()</strong>.</p>
<p>O código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> br.com.carstore.servlet;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> br.com.carstore.dao.CarDao;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.servlet.annotation.WebServlet;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.servlet.http.HttpServlet;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.servlet.http.HttpServletRequest;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> javax.servlet.http.HttpServletResponse;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.IOException;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@WebServlet</span>(<span style="color:#e6db74">&#34;/delete-car&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DeleteCarServlet</span> <span style="color:#66d9ef">extends</span> HttpServlet {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doPost</span>(HttpServletRequest req, HttpServletResponse resp) <span style="color:#66d9ef">throws</span> IOException {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String carId <span style="color:#f92672">=</span> req.<span style="color:#a6e22e">getParameter</span>(<span style="color:#e6db74">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> CarDao().<span style="color:#a6e22e">deleteCarById</span>(carId);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        resp.<span style="color:#a6e22e">sendRedirect</span>(<span style="color:#e6db74">&#34;/find-all-cars&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Pronto, nossas classes <em>DAO</em> e <em>Servlet</em> estão prontas para receber a requisição e executar o comando de remoção / delete no nosso banco de dados.</p>
<p>Após executar a chamada para a classe <strong>carDao</strong> e no método <strong>deleteCarById</strong> uma requisição e feita para o endpoint <strong>/find-all-cars</strong> que por sua vez executa uma nova consulta no banco de dados e exibe os dados atualizados na página <strong>dashboard.jsp</strong>.</p>
<hr>
<h2 id="tarefa-2-refatorando-o-código-para-retornar-o-id">Tarefa 2: Refatorando o código para retornar o ID</h2>
<p>Para que o comando de <em>remoção / delete</em> funcione corretamente, nós precisamos que o ID do carro cadastrado seja retornado no momento da consulta. Para isso teremos que fazer uma refatoração no nosso código.</p>
<p>1 - O primeiro passo é refatorar a classe <em>model</em> <strong>Car</strong>, adicionando uma nova variável do tipo <em>String</em> chamada <em>id</em> e um novo construtor sobrecarregado que recebe o <em>ID</em> e o <em>Name</em> por parametrô. Abra a classe Car que esta localizada dentro do pacote <em>br.com.carstore.model</em>, crie uma nova variável privada / private do tipo String chamada ID e crie o seu respectivo método <em>(getter)</em> getId(). Na sequência, crie um construtor que recebe <em>id</em> e <em>name</em> como parâmetro.</p>
<p>OBS: Nenhum código deve ser removido nesta etapa. Apenas adicione uma nova variável e o construtor sobrecarregado.</p>
<p>O código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> br.com.carstore.model;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Car</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String id;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Car</span>(String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Car</span>(String id, String name) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">id</span> <span style="color:#f92672">=</span> id;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> id;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> name;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>2 - Agora será necessário refatorar o método <strong>findAllCars()</strong> que foi criado no Laboratório 3, para que ao varrer <em>(while)</em> o <em>resultSet</em>, ele pegue duas propriedades sendo elas <em>id</em> e <em>name</em>.</p>
<p>O código existente é o seguinte:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (resultSet.<span style="color:#a6e22e">next</span>()) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String carName <span style="color:#f92672">=</span> resultSet.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;name&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Car car <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Car(carName);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cars.<span style="color:#a6e22e">add</span>(car);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Após a refatoração, o código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (resultSet.<span style="color:#a6e22e">next</span>()) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    String carId <span style="color:#f92672">=</span> resultSet.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;id&#34;</span>);
</span></span><span style="display:flex;"><span>    String carName <span style="color:#f92672">=</span> resultSet.<span style="color:#a6e22e">getString</span>(<span style="color:#e6db74">&#34;name&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Car car <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Car(carId, carName);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cars.<span style="color:#a6e22e">add</span>(car);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>3 - Agora será necessário refatorar o formulário html (dashboard.jsp) para exibir o ID no momento da consulta. Abra a página <strong>dashboard.jsp</strong> e adicione a variável <em>${car.id}</em></p>
<p>O código existente é o seguinte:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">c:forEach</span> <span style="color:#a6e22e">var</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;car&#34;</span> <span style="color:#a6e22e">items</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${cars}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span>&gt;${car.name}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">c:forEach</span>&gt;
</span></span></code></pre></div><p>Após a refatoração, o código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">c:forEach</span> <span style="color:#a6e22e">var</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;car&#34;</span> <span style="color:#a6e22e">items</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${cars}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span>&gt;${car.id}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span>&gt;${car.name}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">c:forEach</span>&gt;
</span></span></code></pre></div><p>4 - Faça uma revisão tudo que foi feito até aqui!</p>
<p>Parabéns! &#x1f44d;</p>
<p>5 - Garanta que tudo até aqui esteja funcionando adequadamente. Salve tudo (CTRL + S) e faça um teste em sua aplicação <em>tomcat7:run</em>, faça o cadastro de um carro e veja se o ID agora é exibido quando a página <em>dashboard.jsp</em> é renderizada conforme imagem a seguir:</p>
<p><img src="/gifs/13-exibindo-o-campo-id.gif" alt="gif animado demonstrando o id do carro sendo exibido na tabela"></p>
<h2 id="tarefa-3-refatorando-a-página-dashboardjsp">Tarefa 3: Refatorando a página dashboard.jsp</h2>
<p>Agora que o ID do carro é exibido na página, chegou a hora de implementar a lógica para remoção do carro no formulário html <em>dashboard.jsp</em>.</p>
<p>1 - Para isso, abra novamente a página <em>dashboard.jsp</em>. Dentro da tabela (table), adicione mais uma coluna (th). A label será <em>Actions</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">table</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;ID&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;Name&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;Actions&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">c:forEach</span> <span style="color:#a6e22e">var</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;car&#34;</span> <span style="color:#a6e22e">items</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${cars}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;${car.id}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;${car.name}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">c:forEach</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">table</span>&gt;
</span></span></code></pre></div><p>2 - O valor que será preenchido será um formulário (form) que ao ser submetido, fará uma requisição HTTP para a nossa nova servlet <strong>DeleteCarServlet</strong> passando o ID do veículo como parametrô.</p>
<p>O código resultante deverá ser igual ao código a seguir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span> &lt;<span style="color:#f92672">table</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;ID&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;Name&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">th</span>&gt;Actions&lt;/<span style="color:#f92672">th</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">c:forEach</span> <span style="color:#a6e22e">var</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;car&#34;</span> <span style="color:#a6e22e">items</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${cars}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;${car.id}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;${car.name}&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/delete-car&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${car.id}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;Delete&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">c:forEach</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">table</span>&gt;
</span></span></code></pre></div><p><img src="/images/02-formulario-com-o-botao.png" alt="imagem mostrando o botão delete sendo renderizado no formulário de listagem"></p>
<p>3 - Faça uma revisão tudo que foi feito até aqui!</p>
<p><img src="/gifs/14-delete-funcionando.gif" alt="gif animado demonstrando a remoção funcionando"></p>
<hr>
<p>Parabéns! &#x1f44d;</p>
<p>Você criou a terceira parte do CRUD (delete). Implementou o médoto <em>deleteCarById()</em> e agora os dados já são deletados no banco de dados.</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="//localhost:1313/tags/java"
      >java</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="//localhost:1313/tags/html"
      >html</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="//localhost:1313/tags/web"
      >web</a
    >
     
    <a
      class="mb-1.5 ltr:mr-1.5 rtl:ml-1.5 rounded-lg bg-black/[3%] px-5 py-1 no-underline hover:bg-black/[6%] dark:bg-white/[8%] dark:hover:bg-white/[12%]"
      href="//localhost:1313/tags/servlet"
      >servlet</a
    >
    
  </footer>
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="//localhost:1313/posts/laboratorio-1/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>LAB 1 - Criando a aplicação</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="//localhost:1313/posts/laboratorio-3/"
      ><span>LAB 3 - Criando o método para SELECT</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  
  <div class="mt-24" id="disqus_thread"></div>
  <script>
    const disqusShortname = 'professor-enoqueleal-github-io';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    &copy; 2025
    <a class="link" href="//localhost:1313/">Car Store</a>
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
